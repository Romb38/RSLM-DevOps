<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RSLM-DevOps: Initialisation d&#39;une VM avec google cloud</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RSLM-DevOps<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Recherche');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Initialisation d'une VM avec google cloud</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> Ce script utilise l'API de google cloud pour lancer un service sur une machine virtuelle.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Dépendances</h1>
<p>Ce script suppose que vous avez installé <a href="https://cloud.google.com/sdk/docs/install-sdk">Google Cloud CLI</a>, que vous l'avez confiqurer avec votre compte et que vous avez créé un projet sur le cloud.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Execution</h1>
<p>En premier lieu il vous faut aller dans le fichier init.sh et modifier les valeurs suivantes</p>
<div class="fragment"><div class="line">PROJECT_ID=&quot;&lt;Le nom de votre projet&gt;&quot;</div>
<div class="line">INSTANCE_NAME=&quot;&lt;Le nom que vous souhaitez donner à votre machine virtuelle&gt;&quot;</div>
</div><!-- fragment --><p>Ensuite, exécuter simplement la commande dans le fichier cloudvm_scripts</p>
<div class="fragment"><div class="line">sudo chmod u+x ./init.sh &amp;&amp; chmod u+x setupVM.sh &amp;&amp; ./init.sh</div>
</div><!-- fragment --><p> L'API google étant lente, pour lancer plusieurs fois ce script, il est nécessaire d'attendre un certain temps.</p>
<p>Il est possible qu'il vous demande de créer une pair de clé la première fois que vous lancez le script. Il utilise ces clé pour se connecter en shh. Créez en simplement une.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Description</h1>
<p>Le fichier <b>init.sh</b> se charge de lancer une instance de machine virtuelle (sous débian), d'exécuter le fichier setupVM.sh et puis (dans notre cas) supprime la machine virtuelle. Dans le cas de l'implémentation d'un service continu, il faudrait simplement la laisser tourner.</p>
<p>Le fichier <b>setupVM.sh</b> configure la machine virtuelle pour qu'elle puisser faire tourner notre scénario. Dans les détails elle exécute les actions suivantes :</p>
<ul>
<li>Installation de docker</li>
<li>Pull de l'image</li>
<li>Exécution de l'image </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Généré par&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
